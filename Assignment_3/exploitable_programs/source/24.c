#include<stdio.h>
/*#include<curses.h>*/
#include<stdlib.h>
#include<time.h>
#include<string.h>
int main(){
    int bet;
    char *pwd;
    char *password = "A1234";
    int slots[3];
    char name[5];
    int balance = 0;
    char* fruits[] ={"Apple", "Orange", "Carrot", "Pineapple", "Lemon", "Banana"};
    char option;
    char lever;
    printf("Welcome to the Slot Machine \n");
    printf("Please enter your name \n");
    //name = (char *)malloc(sizeof(char));
    scanf("%s", name);
    printf("Please enter your password\n");
    pwd = (char *)malloc(sizeof(char));
    scanf("%s", pwd);
    if(strcmp(pwd, password) == 0){
	   do{
        	printf("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ \n");
        	printf("$                      YOU CAN BET ANY AMOUNT!                                        $ \n");
        	printf("$ If two slots are same then you will get twice the bet amount                        $ \n");
        	printf("$ If three slots are same then you will get five times the bet amount                 $ \n");
        	printf("$ If you get Oranges in all three slots then you will get ten times the bet amount    $ \n");
		printf("$ If you don't get matching slots you will lose all your prize money                  $ \n");
        	printf("$ Test your luck!                                                                     $ \n");
        	printf("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ \n");
        	printf("Please enter your bet amount \n");
        	scanf("%d", &bet);
        	printf("Press any key to pull the lever \n");
		getchar();
		lever = getchar();
		srand(time(NULL));
        	for(int i = 0; i < 3;i++){
	    	//srand(time(NULL)); can be used for hacking
            	slots[i] = rand()%6;
	    	printf("%s\t",fruits[slots[i]]);
        	}
		if(slots[0] == slots[1] || slots[1] == slots[2] || slots[0] == slots[2]){
	     		printf("\nHurray! You have won $%d \n", bet * 2);
	     		balance = balance + (bet * 2);
		}
		else if(slots[0] == slots[1] && slots[1] == slots[2] && slots[0] == slots[2]){
			printf("\nHurray! You have won $%d \n", bet * 5);
			balance = balance + (bet * 5);
		}
		else if(slots[0] == 1 && slots[1] == 1 && slots[2] == 1){
			printf("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ \n");
			printf("$                           JACKPOT!!!                           $ \n");
			printf("$ You have won $%d \n                                            $", bet * 10);
			printf("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ \n");
			balance = balance + (bet * 10);
		}
		else{
			printf(" \nBetter luck next time! :(");
			balance = 0;
		}
		printf("\nYour current prize money  is $%d \n", balance);
		printf("Do you want to play again? press Y or N \n");
		getchar();
		option = getchar();
	   }while(option == 'Y' || option == 'y');
	   printf("You have won $%d as prize money\n", balance);
	   printf("Bye %s! \n", name);
    }
}
