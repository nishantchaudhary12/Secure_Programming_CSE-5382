#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int authenticate();
int main(int argc, char *argv[]) 
{
	printf("\n==========\n");
	printf("Gradebook\n");
	printf("==========\n");
	char sub[10];
	int quizs=0, i=0,total=0,score=0,avg=0;
	if (argc < 3)
	{
		printf("\nInvalid arguments\n");
		printf("\nUsage: ./Gradebook <NetId> <Password>\n");
		exit(0);
	}
	else if(authenticate(argv[1],argv[2]))
	{
		printf("\n*********************\n");
		printf("Access Granted !!!\n");
		printf("*********************\n");
	} 
	else
	{
		printf("\nAccess Denied.\n");
		exit(0);
	}
	printf("\nChose subject name from below\n");
	printf("-----------------------------");
	printf("\nsecp\ncloud\ndaa\n");
	printf(" : ");
	scanf("%s",&sub);
	if(strcmp(sub,"secp")==0 || strcmp(sub,"cloud")==0 || strcmp(sub,"daa")==0)
	{
		printf("\nEnter no. of quizzes: ");
		scanf("%d",&quizs);
		for(i=0; i<quizs; i++)
		{
			printf("\nEnter score for quiz no %d: ",(i+1));
			scanf("%d",&score);
			total=total+score;
		}
		printf("\nTotal score: %d \n",total);	
		avg=total/quizs;
		printf("\nAverage: %d",avg);  
		if(avg>100)
		{
			printf("\nInvalid Score\n");
		}
		else if(avg>=90)
		{  									  
			printf("\n================");
			printf("\nGrade A");
			printf("\n================\n");
		}
		else if(avg>=80)
		{
			printf("\n================");
			printf("\nGrade B");
			printf("\n================\n");
		}			
		else if(avg>=70)
		{
			printf("\n================");
			printf("\nGrade C");
			printf("\n================\n");
		}			
		else if(avg>=60)
		{		
			printf("\n================");
			printf("\nGrade D");
			printf("\n================\n");
		}
		else 
		{
			printf("\n================");
			printf("\nGrade F");
			printf("\n================\n");
		}
	}
	else 
	{
		printf("\nInvalid choice entered\n");
		return 0;
	} 
}

int authenticate(char *id, char *password)
{
	int auth_flag=0;
	char studpass_buf[12],studid_buf[6],netid[]="5432";
	strcpy(studpass_buf,password);
	strcpy(studid_buf,id);
	if(strcmp(studpass_buf,"SECPASS")==0 && strcmp(studid_buf,netid)==0){
		auth_flag=1;
	}
	return auth_flag;
}