#include<iostream>
#include<cstring>
#include<stdio.h>
#include<fstream>
using namespace std;
class Book{
	char bookName[50], authorName[50];
	char fbName[50], faName[50];
	public:
	Book(){}
	void newBook()
	{	
		ofstream file;
		file.open("BookManagement.txt", ios::app);
		cout<<"\nEnter details of the new book: ";
		cout<<"\nEnter Book Name: ";
		cin>>bookName;
		cin.sync();
		strncpy(fbName, bookName, sizeof(fbName));
		fbName[50] = '\0';
		file<<fbName<<'\t';
		file.flush();
		//cout<<fbName<<endl;
		cout<<"\nEnter Author Name: ";
		cin>>authorName;
		cin.sync();
		strncpy(faName, authorName, 50);
		faName[50] = '\0';
		file.flush();
		file<<faName;
		//cout<<fbName<<endl;		
		//cout<<faName;
		
		file<<'\n';
		file.close();
	}
	void searchBook()
	{	
		char tempB[50];
		bool flag = false;
		cout<<"\nEnter Book Name: ";
		cin>>bookName;
		strcpy(tempB, bookName);
		ifstream file;
		file.open("BookManagement.txt");
		while(!file.eof())
		{
			file>>fbName>>faName;
			if(file.eof()) break;
			if(strncmp(tempB, fbName, 50) == 0)
			{	flag = true;
				break;
			}
		}
		if(flag == true)
			cout<<"\nBook Found!!!";
		else
			cout<<"\nBook not found";
	}
	void showBooks()
	{	
		cout<<"\nList of Books";
		ifstream file;
		file.open("BookManagement.txt");
		while(!file.eof())
		{	
						
			file>>fbName;
			if(file.eof()) break;
			cout<<"\n"<<fbName;
			file.get();
		
			file>>faName;
			
			cout<<"\t"<<faName;
			file.get();
			
		}
		file.close();
	}
};
int main()
{	
	int ch;
	Book b;
	while(1){
	cout<<"\n*******Book Management System*******";
	cout<<"\n1. Add New Book\n2. Search Book\n3. List Books\n4. Exit";
	cout<<"\nEnter choice: ";
	cin>>ch;
	switch(ch)
	{
		case 1: {b.newBook();
			break;}
		case 2: {b.searchBook();
			break;}
		case 3: {b.showBooks();
			break;}
		case 4: {exit(0);}
		default: cout<<"\nInvalid Choice";
	}
	}
	return 0;

}
		
