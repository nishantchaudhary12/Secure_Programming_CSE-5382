#include <stdio.h>
#include <stdlib.h>
#include <string.h>


int authenticate(char *pwd) {
	int flag = 0;
	char buff[16];
	strcpy(buff, pwd);
	if(strcmp(buff, "147852") == 0)
	flag = 1;
	if(strcmp(buff, "123321") == 0)
	flag = 1;
    if(strcmp(buff, "357895") == 0)
	flag=1;
	return flag;
}

int main(int argc, char *argv[]) {
	if(argc < 2) {
		printf("Provide password as a command line argument", argv[0]);
		exit(0);
	}

	if(authenticate(argv[1]))
	printf("\n _____ACCESS GRANTED_____\n");

	else {
		printf("\nACCESS DENIED\n");
		exit(0);
	}

	int choice,deposit,withdrawValue;
	int balance = 2000;

	do
	{
		printf("\n Welcome to your ATM:\n");
		printf("\n 1.View Balance  2.Withdraw Money  3.Deposit Money  4.Exit\n");
		printf("       _______________       \n\n");
		printf(" Select between choices 1-4: ");
		scanf("%d", &choice);
		switch("%d", choice)
		{
			case 1:	 printf("\n Balance details:");
				     printf("%d", balance);
			         printf("\n");
			      	 break;

			case 2:	printf(" Enter amount for withdrawal:");    
				    scanf("%d", &withdrawValue);
					if(withdrawValue <= 900 && balance != 0 && balance > withdrawValue)
					{
						printf(" Please collect the cash\n");
						balance = balance-withdrawValue;
						printf("Current balance is: %d",balance);
					}
					else
					printf("Insufficient balance in account");
					break;
				
			case 3:
					printf("Insert amount to be deposited: ");
					scanf("%d", &deposit);
					balance = balance + deposit;
					printf("The Current Balance is: %d",balance);
					break;

			case 4:
				printf("Thank You for using ATM services.\n");
				break;
		}

	} while(choice != 4);

return  0;
}