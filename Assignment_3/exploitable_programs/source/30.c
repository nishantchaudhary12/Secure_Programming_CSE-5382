#include <stdio.h>
#include <string.h>
#include <stdlib.h>

//Function for displaying welcome note
void userLogin(){
	
    printf("\nLogin successful! Welcome to User Banking Portal\n\n");	
    userOptions();
}

//Checks User-Authentication
int auth(char *pass){
	
    int flag = 0 ;
	//password buffer
    char passwrd[20];
	
	//copy 'pass' to created password buffer using 'strcpy'
    strcpy(passwrd, pass);
	
	//if 'pass' matches 'keepitsecret' grant login access
    if(strcmp(passwrd,"keepitsecret") == 0){
	//set flag to 1
        flag = 1;
    }
	
    return flag;
}

//Opening Balance in the account
double bal = 3000.00;

//Funtion to display Available Balance
void viewBalance(){
    printf("Current Available Balance in account is: $%lf \n\n", bal);
}

//Function to add funds to account
void addFunds(){
    printf("Please enter the Amount to be added in the account: \n");
	
    int funds = 0;	
    scanf("%d", &funds);
	//If Amount entered is negative, notify and exit
    if(funds < 0){
        printf("Invalid Amount\n");
        exit(0);
	//Else add Funds to account
    }else{
        bal = bal + funds;
        printf("Funds $%d added to account successfully\n",funds);
    }
}

//Function to transfer Funds
void transferFunds(){
	
    printf("Please enter the Amount to be transferred: \n");
    int funds = 0;
	
    scanf("%d", &funds);
	//if Amount to transfer is more than balance, notify and exit
    if(funds > bal){
        printf("Amount is greater than available bal\n");
        exit(0);
	//if Amount is negative, notify and exit
    }else if(funds < 0){
        printf("Invalid Amount\n");
        exit(0);
	//Else transfer
    }else{
        bal = bal - funds;
        printf("Funds $%d transferred successfully\n",funds);
    }
}



//Funtion to select desired Banking option
void userOptions(){
	
    printf("Please select your desired Online banking option:\n");
    printf(" 1. View Available Balance\n");
    printf(" 2. Add funds\n");
    printf(" 3. Transfer Funds\n");
    printf(" 4. Logout\n");	
    printf("\nChoose your action: \n");
    int action = 0;
    scanf("%d", &action);
	
    if(action == 1){
        viewBalance();
		
    }else if(action == 2){
        addFunds();
		
    }else if(action == 3){
        transferFunds();
		
    }else if(action == 4){
        printf("Logged out from account!\n");
        exit(0);
		
    }else{
        printf("Incorrect banking action selected, Try Again!\n");
        exit(0);
    }
	
    userOptions();
}

//Main function
int main(int argc, char *argv[]){
	
	//If insufficient arguments passes, notify user
    if(argc < 2){
        printf("Usage: %s <password>\n", argv[0]);
        exit(0);
    }
	
	//If authorization successful, provide Banking access
    if(auth(argv[1])){
        userLogin();
    }
	//Else deny login
	else{
        printf("Denied login access\n");
    }
}
